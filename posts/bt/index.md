# 宝塔面板学习笔记


![](https://burayimg.heisenw.com/blog/img/61e91a6a-f3b4-4b36-a79a-1d983343bf02.webp)
## 使用宝塔webhook自动拉取gitee项目
- 这个功能可以参考我之前写的[docsify学习笔记](/docsify-notes)中有关`宝塔面板同步gitee`部分内容。
## 反向代理实现域名免端口登录面板
>[!tip]
>本文参考了[Nginx 反代使宝塔隐藏端口，使用 80 或 443 登录面板！](https://www.vvso.cn/xlbk/18197.html)
- 首先做一下域名解析
- 给宝塔面板绑定域名
>[!warning]
>一定要确认域名已经解析成功再操作给面板绑定域名，不然解析成功之前无法访问面板。因为绑定后会立即退出面板，然后只能通过域名+端口+安全入口访问。
- 发现开启面板SSL太麻烦了，没办法直接拉取自己域名的证书，需要手动粘贴，所以果断放弃了面板SSL
- 新建一个站点，绑定上面的域名，进入站点设置，反向代理，“缓存”、“高级功能”都**不要**点开，`目标URL`就是正常的登录的`域名:端口`，`发送域名`就是想用的域名
>[!tip]
>好像不需要加上`/安全入口`，直接用`域名:端口`就可以了，我也不知道为什么。
- 在实际测试的时候，有几个问题：
    - 开启了“缓存”后，会导致提示`ERR_TOO_MANY_REDIRECTS`这样的太多重定向错误，网页无法打开。
        - 教程上说完成后点击保存并打开配置文件，将`这条反向代理`的配置文件中的 expires 12; 删掉（若不删掉会因为缓存导致反代后的面板无法登陆，提示`ERR_TOO_MANY_REDIRECTS`），实际上在新建反向代理的时候，不勾选`缓存`就可以了，不需要这么麻烦。
    - `目标URL`使用了`域名:端口/安全入口`重定向后就会变成`域名/安全入口`，`端口`消失导致无法打开面板，删除`/安全入口`后反而能够正常登陆了。
    - 使用反向代理后，面板设置里面的端口变成了`80`，不用管他，也不要修改。
## 网站突然打不开了
- 昨天设置好了域名反向代理免端口登录面板，结果今天一早发现不好使，直接提示网页打不开，使用了`域名:端口/安全入口`可以进入面板。打开自己的网站，发现也是网页打不开，奇怪，进行了以下检测：
    - ping域名，确认域名解析正常；
    - 检查服务器安全组，端口均正常放行；
    - 检查宝塔面板安全，端口均正常放行。  
    等等，443端口显示“放行”，“未使用”，80端口也是这样。
        - 说明没有服务鉴定443和80端口，抓头。
    - 奇怪，没做什么操作啊。检查了一下网站的ssl证书，都是正常的
>[!warning]
>进入软件商店，发现Nginx竟然是暂停状态，重启了Nginx，一切恢复正常了，莫名其妙。



---

> 作者: [Buray](http://www.burayw.top)  
> URL: http://localhost:1313/posts/bt/  

